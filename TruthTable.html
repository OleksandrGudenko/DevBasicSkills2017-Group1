<!DOCTYPE HTML>
<html>
<meta charset="utf-8"/> 
<head>
    <title>Math Tools</title>
    <link rel="stylesheet" type="text/css" href="common.css">
    <link rel="stylesheet" type="text/css" href="TruthTables.css">
</head>

<script>      

    var variables = ['p', 'q', 'r'];
    var constants = [ false, true ];
    //                v                         ^ 
    var operators = [String.fromCharCode(709), String.fromCharCode(708)];
    
    var givenVariables = [];
    var givenConstants = [];
    var givenOperators = [];
    var givenNegations = [];

    function SetPage()
    {
        CreateDropdowns();
        GetValues();
        CreateTable(); 
    }

    function CreateDropdowns()
    {
        var dropdownTable = document.getElementById("dropdowns").insertRow();
        
        for(var i = 0; i < (variables.length * 2) - 1; i++)
        {  
            var newCell = dropdownTable.insertCell();
            newCell.className = "Cell" + i;

            var newDropdown = document.createElement("select");
            newDropdown.setAttribute("id", "dropdown" + (dropdownTable.cells.length - 1));

            newCell.appendChild(newDropdown);

            if(i % 2 == 0)
            {
                //variables
                for(var j = 0; j < variables.length * 2; j++)
                {
                    var newOption = document.createElement("option");
 
                    if(j < variables.length)
                        newOption.text = variables[j];
                    else 
                        newOption.text = String.fromCharCode(172) + variables[j - variables.length];
                        //                                    Â¬
                        newDropdown.add(newOption);
                }
            } else {
                //operators
                for(var j = 0; j < operators.length; j++)
                {
                    var newOption = document.createElement("option");

                    newOption.text = operators[j];

                    newDropdown.add(newOption);
                }
            }
        }
    }

    function GetValues()
    {
        var myDropdowns = document.getElementById("dropdowns").rows[0].cells;
        
        givenOperators = [];

        for(let i = 0; i < myDropdowns.length; i++)
        {
            var dropdown = document.getElementById("dropdown" + i);
            console.log(dropdown.selectedIndex);
        }

        CreateTable();
    }

    function CreateTable()
    {
        var table = document.getElementById("table");
        var row = null;

        var tableHead = document.getElementById("thead");

        //console.log(true || false && true);

        for(var i = 0; i < variables.length; i++)
        {
            tableHead.children[i].innerHTML = variables[i];

            givenConstants[i] = [];

            GenerateConstants(constants.length,variables.length,i);

            while(table.rows.length < Math.pow(constants.length, variables.length))
            {
                row = table.insertRow();    
            }

            for(var j = 0; j < table.rows.length; j++)
            {
                var cell = table.rows[j].insertCell();
                cell.innerHTML = givenConstants[i][j];
            }
        }

        for(var i = 0; i < table.rows.length; i++)
        {
            var cell = table.rows[i].insertCell();
            cell.innerHTML = Calculate(i);
        } 
    }

    function Calculate(constant)
    {
        var result = givenConstants[0][0];

        console.log(result);
        //console.log(givenConstants[2][1]);
        //combination = add 0 and 1
        //add combination and 2
        //add combination and 3

        for(var variable = 0; variable < operators.length; i++)
        {
            //Calculate:
            //variable i [constant]
            //if(||) 
            //result = result givenConstants[variable][constant]

        }

        //var result = (givenConstants[variable][constant] || givenConstants[i][0] && givenConstants[i][0]);

        return result;
    }

    function GenerateConstants(myConstants, myVariables, targetVariable)
    {
        var bool = false;
        var count = 0;

        for(var i = 0; i < Math.pow(myConstants,  myVariables); i++)
        {
            givenConstants[targetVariable][i] = bool;

            count++

            if(count == Math.pow(myConstants, myVariables - (targetVariable + 1)))
            {
                bool = !bool;
                count = 0;
            }
        }
    }

</script>

<body onload="SetPage()">
    <div class="contents">

        <h1>Math Tools</h1>

        <div>
            <form method="get" action="NumberSystemConverter.html">
                <button href="NumberSystemConverter.html" class="UpperRow1st">Number System Converter</button>
            </form>

            <div class="divider"></div>

            <form method="get" action="NumberSystemOutput.html">
                <button href="" class="UpperRow">Number System Output</button>
            </form>

            <form method="get" action="NumberSystemOutput.html">
                <button class="UpperRow">Combinatorics</button>
            </form>

            <div class="endLine"></div>

        </div>
        <div>
            <form method="get" action="TruthTable.html">
                <button class="BottomRow1st">Truth Tables</button>
            </form>

            <form method="get" action="RandomValues.html">
                <button class="BottomRow">Random Values</button>  
            </form>

            <form method="get" action="TemperatureConverter.html">
                <button class="BottomRow">Temperature Converter</button>
            </form>

            <div class="endLine"></div>  

        </div>

        <div>
            <div>
                <table style="width: 45%">
                    <thead>
                        <tr id="thead">
                            <td>A</td>
                            <td>B</td>
                            <td>C</td>
                            <td>p v q ^ r</td>
                        </tr>
                    </thead>
                </table>
            </div>

            <div style="overflow:auto; height:390px;">     
                <table style="width: 15%;">
                    <tbody id="table"></tbody>
                </table>      
            </div>
        </div>

        <div>
            <table><tbody id="dropdowns"></tbody></table>
        </div>
    <div class="pageBottom"><h3>Developed by Oleksandr Gudenko and Florian Brandsma</h3></div>
</body>

</html>